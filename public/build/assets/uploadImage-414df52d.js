import"./bootstrap-359a5dbc.js";const i=document.getElementById("bbcode-id");if(i){sceditor.create(i,{format:"bbcode",icons:"monocons",style:"/minified/themes/defaultdark.min.css",emoticons:"/emoticons",plugins:"dragdrop",dragdrop:{allowedTypes:["image/jpeg","image/png"],isAllowed:function(a){return!0},handlePaste:!0,handleFile:function(a,t){var o=t();d(a).then(function(l){o.insert("<img src='"+l+"' class='image-upload' />")}).catch(function(){o.cancel()})}},autofocus:!0}),window.sceditorInstance=sceditor.instance(i);let e=document.getElementsByClassName("sceditor-container")[0];document.getElementsByClassName("sceditor-button-table")[0].parentElement.remove(),e.style.width="100%"}function d(e){let n=new Headers({"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').attributes.content.value}),a=new FormData;return a.append("image",e),fetch("/post/upload-image",{method:"post",headers:n,body:a}).then(function(t){return t.json()}).then(function(t){if(t.success)return imageId=t.data.idImageTmp,t.data.link;throw new Error("Upload error")})}function s(e){axios.post("/post/upload-image",e).then(n=>{console.log(n.data);let a=n.data.data.link;if(a){let t=a,o='<a  href="'+t+'"><img  src="'+t+'" alt="Uploaded Image" /></a<';parent.window.sceditorInstance.wysiwygEditorInsertHtml(o)}else a||alert("Error: Image not uploaded")}).catch(n=>{console.log(n)})}let r=document.getElementById("upload-image");r&&(r.onclick=()=>{let e=new FormData;e.append("image",document.getElementById("image").files[0]),e.append("user","hubot"),console.log(e),s(e)});export{i as t};
